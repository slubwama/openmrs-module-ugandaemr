<htmlform formName="HMIS ACP 015 - Exposed Infant Card Encounter Form"
          formDescription="Captures encounter details for infants born to HIV positive mothers"
          formEncounterType="4345dacb-909d-429c-99aa-045f2db77e2b"
          formUuid="6f6b4802-7642-4226-84dc-ea7db01924b6"
          formVersion="4.0.0"
          formAddMetadata="yes"
          formUILocation="patientDashboard.visitActions"
          formOrder="5"
          formIcon="icon-medkit"
          formShowIf="(visit.active || !visit.active) &amp;&amp; patient.person.dead==false &amp;&amp; patient.person.age &lt; 6 &amp;&amp; sessionLocation.uuid=='e9bc61b5-69ff-414b-9cf0-0c22d6dfca2b'"
          formDisplayStyle="Standard"
          formLabel="EID Card - Encounter form">

    <ifMode mode="ENTER">
        <includeIf velocityTest="$fn.allEncounters('9fcfcc91-ad60-4d84-9710-11cc25258719').size() == 0">
            <script>
                jq(function () {
                    alert('This patient has no Summary page, you will now be forwarded to the patient dashboard');

                    /*
                    * queryParameters -> handles the query string parameters
                    * queryString -> the query string without the fist '?' character
                    * re -> the regular expression
                    * m -> holds the string matching the regular expression
                    */
                    var queryParameters = {}, queryString = location.search.substring(1),
                        re = /([^&amp;=]+)=([^&amp;]*)/g, m;

                    // Creates a map with the query string parameters
                    while (m = re.exec(queryString)) {
                        queryParameters[decodeURIComponent(m[1])] = decodeURIComponent(m[2]);
                    }

                    /*
                    * Replace the query portion of the URL.
                    * jQuery.param() -> create a serialized representation of an array or
                    *     object, suitable for use in a URL query string or Ajax request.
                    */
                    location.href = window.location.protocol + "//" + window.location.host +
                        '/' + OPENMRS_CONTEXT_PATH + '/coreapps/clinicianfacing/patient.page?patientId='
                        + queryParameters['patientId']; // Causes page to reload
                });
            </script>
        </includeIf>
    </ifMode>

    <script type="text/javascript">

        beforeSubmit.push(function () {
            var submitVal = true;
            var submitValStage = [];
            var message1 = "The next appointment date must be after the current visit date";

            <!-- check if encounter date field has a value -->
            if (getValue('5096.value') != "") {
                setValue('5096.error', '');

                <!-- The next appointment date if specified has to be after the encounterDate -->
                submitValStage.push(dateValidator("5096", "encounterDate", "", message1, "", "less_than", true));
            }

            if (submitValStage.indexOf(false) != -1) {
                submitVal = false;
                jq().toastmessage('showErrorToast', "  There are errors during the validation of the data on the form. Please correct them and submit again");
            }

            var noOfErrorsInPrescription=0;
            jq(".multi-drug").each(function () {
                var id= this.id.replace("-toggleContainer","")
                var element= jq("#"+id+"-toggleContainer");
                var qty_unit=jq(element).find("#qty_unit_" + id+" select").find(":selected").val()
                var duration_unit=jq(element).find("#duration_unit_" + id+" select").find(":selected").val()
                var drug=jq(element).find("#"+id+"-drug input").val();
                var qty=jq(element).find("#quantity_" + id).find("input").val()
                var strength=jq(element).find("#drug_strength_" + id).find("input").val()
                var duration=jq(element).find("#duration_"+id+" input").val();

                if(drug!==null &amp;&amp; drug!==""){
                    if(qty_unit===null || qty_unit===""){
                        getField('qty_unit_'+id+".error").html('Qty unit is required').show();
                        noOfErrorsInPrescription+=1
                    }
                    if(duration_unit===null|| duration_unit===""){
                        getField('duration_unit_'+id+".error").html('duration  unit is required').show();
                        noOfErrorsInPrescription+=1
                    }
                    if(qty===null || qty===""){
                        jq('#quantity_' + id).find(".error").html('quantity  is required').show();
                        noOfErrorsInPrescription+=1
                    }

                    if(duration===null || duration===""){
                        jq('#duration_' + id).find(".error").html('duration  is required').show();
                        noOfErrorsInPrescription+=1
                    }

                    if(strength===null || strength===""){
                        jq('#drug_strength_' + id).find(".error").html('strength  is required').show();
                        jq().toastmessage('showErrorToast', "strength for drug "+drug+" is required");
                        noOfErrorsInPrescription+=1
                    }
                }
            });

            if(noOfErrorsInPrescription>0){
                jq().toastmessage('showErrorToast', "There are "+noOfErrorsInPrescription+" errors under medication that need to be resolved");
                valid=false;
            }

            return submitVal;
        });

        //Block Multiple encounter entry on same date
        blockEncounterOnSameDateEncounter(jq("#encounterDate").find("input[type=hidden]"), "block");

        jq(document).ready(function () {

            /* enabling and disabling other clinical assessment codes not listed */
            jq("#enable-disable-clinical-assessment").find("input[type$='text']").attr("disabled", true);

            jq("#enable-disable-clinical-assessment").change(function () {
                if (jq('#enable-disable-clinical-assessment').find('#specify-other-signs-and-symptoms-of-hiv').find(':checkbox').prop('checked')) {
                    jq("#enable-disable-clinical-assessment").find("#other-signs-and-symptoms-of-hiv").find("input[type$='text']").attr("disabled", false);
                    jq("#other-signs-and-symptoms-of-hiv").removeClass("html-form-entry-disabled-field");
                } else {
                    jq("#enable-disable-clinical-assessment").find("#other-signs-and-symptoms-of-hiv").find("input[type$='text']").attr("disabled", true);
                    jq("#other-signs-and-symptoms-of-hiv").addClass("html-form-entry-disabled-field");
                }
            });

            /* enabling and disabling immunization code not done field */
            jq("#immunization-not-done").find("input[type$='text']").attr("disabled", true);

            jq("#immunization-not-done").change(function () {
                if (jq('#immunization-not-done').find('#specify-why-not-immunized').find(':checkbox').prop('checked')) {
                    jq("#immunization-not-done").find("#why-not-immunized").find("input[type$='text']").attr("disabled", false);
                    jq("#why-not-immunized").removeClass("html-form-entry-disabled-field");
                } else {
                    jq("#immunization-not-done").find("#why-not-immunized").find("input[type$='text']").attr("disabled", true);
                    jq("#why-not-immunized").addClass("html-form-entry-disabled-field");
                }
            });

            /* enabling and disabling other medication codes not listed */
            jq("#medication").find("input[type$='text']").attr("disabled", true);

            jq("#medication").change(function () {
                if (jq('#medication').find('#specify-other-medication').find(':checkbox').prop('checked')) {
                    jq("#medication").find("#other-medication").find("input[type$='text']").attr("disabled", false);
                    jq("#other-medication").removeClass("html-form-entry-disabled-field");
                } else {
                    jq("#medication").find("#other-medication").find("input[type$='text']").attr("disabled", true);
                    jq("#other-medication").addClass("html-form-entry-disabled-field");
                }
            });

            var age = <lookup complexExpression="$patient.age"/>;

            getMUACCodeFromMUACScoreByAge(age);

        });

        jq(document).ready(function () {
            $allRows_other = jq(this).find('.multi-drug-other');
            $allRows_other.hide();
            jq('#1-removeEntry-other').remove();
            jq('#10-addEntry-other').remove();
            jq('#1-toggleContainer-other').show();

            jq('#11-removeEntry-other').remove();
            jq('#20-addEntry-other').remove();
            jq('#11-toggleContainer-other').show();
        });

        jq(document).ready(function () {
            jq('.addEntry-other').on("click", function () {
                var correctedAddButtonId = parseFloat(this.id) + 1;
                var contentAddId = "#" + correctedAddButtonId + "-toggleContainer-other";
                jq(contentAddId).toggle(true);
                jq('#' + this.id).toggle(false);
                jq('#' + parseFloat(this.id) + '-removeEntry-other').toggle(true);
                return false;
            });
        });

        jq(document).ready(function () {
            jq('.removeEntry-other').on("click", function () {
                var correctedRemoveButtonId = parseFloat(this.id) - 1;
                var contentAddId = "#" + parseFloat(this.id) + "-toggleContainer-other";
                jq(contentAddId).toggle(false);
                jq(':input:not(:button)', contentAddId).val([]);
                jq('#' + correctedRemoveButtonId + '-addEntry-other').toggle(true);
                jq('#' + correctedRemoveButtonId + '-removeEntry-other').toggle(true);

                return false;
            });

        });

        jq(document).ready(function () {
            $allRows = jq(this).find('.multi-arv-drug');
            $allRows.hide();
            jq('#1-removeEntry1-other').remove();
            jq('#10-addEntry1-other').remove();
            jq('#1-toggleContainer1-other').show();

            jq('#11-removeEntry').remove();
            jq('#20-addEntry1-other').remove();
            jq('#11-toggleContainer1-other').show();
        });

        jq(document).ready(function () {
            jq('.addEntry-other1').on("click", function () {
                var correctedAddButtonId = parseFloat(this.id) + 1;
                var contentAddId = "#" + correctedAddButtonId + "-toggleContainer1-other";
                jq(contentAddId).toggle(true);
                jq('#' + this.id).toggle(false);
                jq('#' + parseFloat(this.id) + '-removeEntry1-other').toggle(true);
                return false;
            });
        });

        jq(document).ready(function () {
            jq('.removeEntry-other1').on("click", function () {
                var correctedRemoveButtonId = parseFloat(this.id) - 1;
                var contentAddId = "#" + parseFloat(this.id) + "-toggleContainer1-other";
                jq(contentAddId).toggle(false);
                jq(':input:not(:button)', contentAddId).val([]);
                jq('#' + correctedRemoveButtonId + '-addEntry1-other').toggle(true);
                jq('#' + correctedRemoveButtonId + '-removeEntry1-other').toggle(true);
                return false;
            });

        });


        jq(document).ready(function () {
            $allRows = jq(this).find('.multi-drug');
            $allRows.hide();
            jq('#1-removeEntry').remove();
            jq('#10-addEntry').remove();
            jq('#1-toggleContainer').show();

            jq('#11-removeEntry').remove();
            jq('#20-addEntry').remove();
            jq('#11-toggleContainer').show();
        });


        jq(document).ready(function () {
            jq('.addEntry').on("click", function () {
                var correctedAddButtonId = parseFloat(this.id) + 1;
                var contentAddId = "#" + correctedAddButtonId + "-toggleContainer";
                jq(contentAddId).toggle(true);
                jq('#' + this.id).toggle(false);
                jq('#' + parseFloat(this.id) + '-removeEntry').toggle(true);
                return false;
            });
        });

        jq(document).ready(function () {
            jq('.removeEntry').on("click", function () {
                var correctedRemoveButtonId = parseFloat(this.id) - 1;
                var contentAddId = "#" + parseFloat(this.id) + "-toggleContainer";
                jq(contentAddId).toggle(false);
                jq(':input:not(:button)', contentAddId).val([]);
                jq('#' + correctedRemoveButtonId + '-addEntry').toggle(true);
                jq('#' + correctedRemoveButtonId + '-removeEntry').toggle(true);

                return false;
            });

        });

        jq(document).ready(function () {
            $allRows = jq(this).find('.multi-test');
            $allRows.hide();
            jq('#1-removeEntry3').remove();
            jq('#10-addEntry3').remove();
            jq('#1-toggleContainer3').show();

            jq('#11-removeEntry').remove();
            jq('#20-addEntry3').remove();
            jq('#11-toggleContainer3').show();
        });

        jq(document).ready(function () {
            jq('.addEntry3').on("click", function () {
                var correctedAddButtonId = parseFloat(this.id) + 1;
                var contentAddId = "#" + correctedAddButtonId + "-toggleContainer3";
                jq(contentAddId).toggle(true);
                jq('#' + this.id).toggle(false);
                jq('#' + parseFloat(this.id) + '-removeEntry3').toggle(true);
                return false;
            });
        });

        jq(document).ready(function () {
            jq('.removeEntry3').on("click", function () {
                var correctedRemoveButtonId = parseFloat(this.id) - 1;
                var contentAddId = "#" + parseFloat(this.id) + "-toggleContainer3";
                jq(contentAddId).toggle(false);
                jq(':input:not(:button)', contentAddId).val([]);
                jq('#' + correctedRemoveButtonId + '-addEntry3').toggle(true);
                jq('#' + correctedRemoveButtonId + '-removeEntry3').toggle(true);
                return false;
            });
        });


        jq(document).ready(function () {
            $allRows = jq(this).find('.multi-arv-drug');
            $allRows.hide();
            jq('#1-removeEntry1').remove();
            jq('#10-addEntry1').remove();
            jq('#1-toggleContainer1').show();

            jq('#11-removeEntry').remove();
            jq('#20-addEntry1').remove();
            jq('#11-toggleContainer1').show();

            jq('.addEntry1').on("click", function () {
                var correctedAddButtonId = parseFloat(this.id) + 1;
                var contentAddId = "#" + correctedAddButtonId + "-toggleContainer1";
                jq(contentAddId).toggle(true);
                jq('#' + this.id).toggle(false);
                jq('#' + parseFloat(this.id) + '-removeEntry1').toggle(true);
                return false;
            });

            jq('.removeEntry1').on("click", function () {
                var correctedRemoveButtonId = parseFloat(this.id) - 1;
                var contentAddId = "#" + parseFloat(this.id) + "-toggleContainer1";
                jq(contentAddId).toggle(false);
                jq(':input:not(:button)', contentAddId).val([]);
                jq('#' + correctedRemoveButtonId + '-addEntry1').toggle(true);
                jq('#' + correctedRemoveButtonId + '-removeEntry1').toggle(true);

                return false;
            });

        });
        <ifMode mode="EDIT">
            jq(document).ready(function () {
            $allRows = jq(this).find('.multi-drug');
            $allRows.hide();
            jq('#1-removeEntry').remove();
            jq('#10-addEntry').remove();
            jq('#1-toggleContainer').show();
            jq('#11-removeEntry').remove();
            jq('#20-addEntry').remove();
            jq('#11-toggleContainer').show();
            for (let x = 0; x&lt;= 10; x++) {
            if (jq(this).find('#' +x+ '-drug').find("input[type$='text']").val()!='')
        {
            jq(this).find('#' +x+ '-toggleContainer').show();
            jq(this).find('#' +x+ '-addEntry').hide();
        }
            else {
            x-=1;
            jq(this).find('#' +x+ '-addEntry').show();
            break;
        }
        }
        });

            jq(document).ready(function () {
            $allRows_other = jq(this).find('.multi-drug-other');
            $allRows_other.hide();
            jq('#1-removeEntry-other').remove();
            jq('#10-addEntry-other').remove();
            jq('#1-toggleContainer-other').show();
            jq('#11-removeEntry-other').remove();
            jq('#20-addEntry-other').remove();
            jq('#11-toggleContainer-other').show();
            for (let x = 0; x&lt;= 10; x++) {
            if (jq(this).find('#' +x+ '-drugother').find("input[type$='text']").val()!='')
        {
            jq(this).find('#' +x+ '-toggleContainer-other').show();
            jq(this).find('#' +x+ '-addEntry-other').hide();
        }
            else {
            x-=1;
            jq(this).find('#' +x+ '-addEntry-other').show();
            break;
        }
        }
        });
        </ifMode>
        var enableStockManagement = <lookup expression="fn.globalProperty('ugandaemr.enableStockManagement')"/>;
        jq(document).ready(function () {

            currentLocationUUID = getLocationByName(jq("#location_id").find("select").find(":selected").text())
            if (enableStockManagement) {
                jq("#drug_strength_select_1").removeClass("hidden");
                jq("#drug_strength_select_2").removeClass("hidden");
                jq("#drug_strength_select_3").removeClass("hidden");
                jq("#drug_strength_select_4").removeClass("hidden");
                jq("#drug_strength_select_5").removeClass("hidden");
                jq("#drug_strength_select_6").removeClass("hidden");
                jq("#drug_strength_select_7").removeClass("hidden");
                jq("#drug_strength_select_8").removeClass("hidden");
                jq("#drug_strength_select_9").removeClass("hidden");
                jq("#drug_strength_select_10").removeClass("hidden");

            } else {
                jq("#drug_strength_1").removeClass("hidden");
                jq("#drug_strength_2").removeClass("hidden");
                jq("#drug_strength_3").removeClass("hidden");
                jq("#drug_strength_4").removeClass("hidden");
                jq("#drug_strength_5").removeClass("hidden");
                jq("#drug_strength_6").removeClass("hidden");
                jq("#drug_strength_7").removeClass("hidden");
                jq("#drug_strength_8").removeClass("hidden");
                jq("#drug_strength_9").removeClass("hidden");
                jq("#drug_strength_10").removeClass("hidden");
            }

            if (enableStockManagement) {
                jq(".drug_strength").change(function () {
                    var objectPosition = jq(this).attr("id").match(/\d/g)[0]
                    jq('#drug_strength_' + objectPosition + ' input').val(jq(this).find(":selected").attr("strength"))
                    jq('#drug_stock_item_' + objectPosition + ' input').val(jq(this).find(":selected").attr("stockItemUUID"))
                    jq('#drug_dispensing_location_' + objectPosition + ' input').val(jq(this).find(":selected").attr("location"))
                    jq('#drug_' + objectPosition + ' input').val(jq(this).find(":selected").attr("drugUuid"))
                });

                jq("#art-regimen  select").change(function () {
                    getDrugByConcept(jq(this).find(":selected").val(), "drug_strength_art_select")
                });

                jq("#drug_strength_art_select").change(function () {
                    jq(this).parent().find('#drug_strength_art_id input').val(jq(this).find(":selected").attr("strength"))
                    jq(this).parent().find('#drug_stock_item_id input').val(jq(this).find(":selected").attr("stockItemUUID"))
                    jq(this).parent().find('#drug_dispensing_location_id input').val(jq(this).find(":selected").attr("location"))
                    jq(this).parent().find('#drug_id input').val(jq(this).find(":selected").attr("drugUuid"))
                });

                jq("#isoniazid-trigger  input:radio").change(function () {
                    getDrugByConcept(jq(this).val(), "drug_strength_isoniazid_select")
                });

                jq("#drug_strength_isoniazid_select").change(function () {
                    jq(this).parent().find('#drug_strength_isoniazid_id input').val(jq(this).find(":selected").attr("strength"))
                    jq(this).parent().find('#drug_stock_item_id input').val(jq(this).find(":selected").attr("stockItemUUID"))
                    jq(this).parent().find('#drug_dispensing_location_id input').val(jq(this).find(":selected").attr("location"))
                    jq(this).parent().find('#drug_id input').val(jq(this).find(":selected").attr("drugUuid"))
                });

                jq("#vitamin-b6-trigger  input:radio").change(function () {
                    getDrugByConcept(jq(this).val(), "drug_strength_vitamin_b6_select")
                });

                jq("#drug_strength_vitamin_b6_select").change(function () {
                    jq(this).parent().find('#drug_strength_vitamin_b6_id input').val(jq(this).find(":selected").attr("strength"))
                    jq(this).parent().find('#drug_stock_item_vitamin_b6_id input').val(jq(this).find(":selected").attr("stockItemUUID"))
                    jq(this).parent().find('#drug_dispensing_location_vitamin_b6_id input').val(jq(this).find(":selected").attr("location"))
                    jq(this).parent().find('#drug_vitamin_b6_id input').val(jq(this).find(":selected").attr("drugUuid"))
                });

                jq("#fluconazole-trigger  input:radio").change(function () {
                    getDrugByConcept(jq(this).val(), "drug_strength_fluconazole_select")
                });

                jq("#drug_strength_fluconazole_select").change(function () {
                    jq(this).parent().find('#drug_strength_fluconazole_id input').val(jq(this).find(":selected").attr("strength"))
                    jq(this).parent().find('#drug_stock_item_fluconazole_id input').val(jq(this).find(":selected").attr("stockItemUUID"))
                    jq(this).parent().find('#drug_dispensing_location_fluconazole_id input').val(jq(this).find(":selected").attr("location"))
                    jq(this).parent().find('#drug_fluconazole_id input').val(jq(this).find(":selected").attr("drugUuid"))
                });

                jq("#99413-target  input:radio").change(function () {
                    getDrugByConcept(jq(this).val(), "drug_strength_99413_select")
                });

                jq("#drug_strength_99413_select").change(function () {
                    jq(this).parent().find('#drug_strength_99413_id input').val(jq(this).find(":selected").attr("strength"))
                    jq(this).parent().find('#drug_stock_item_99413_id input').val(jq(this).find(":selected").attr("stockItemUUID"))
                    jq(this).parent().find('#drug_dispensing_location_99413_id input').val(jq(this).find(":selected").attr("location"))
                    jq(this).parent().find('#drug_99413_id input').val(jq(this).find(":selected").attr("drugUuid"))
                });

                jq(".drug-other").change(function () {
                    getDrugByConcept(jq(this).find("input:hidden").val(), "drug_strength_select_" + jq(this).attr("id").match(/\d/g)[0] + "")
                });

                jq(".arv-split").change(function () {
                    getDrugByConcept(jq(this).find("input:hidden").val(), jq(this).attr("id").match(/\d/g)[0] + "_arv_split_strength_select")
                });

                jq(".arv_split-strength").change(function () {
                    var objectPosition = jq(this).attr("id").match(/\d/g)[0]
                    jq('#' + objectPosition + '_arv_split_strength input').val(jq(this).find(":selected").attr("strength"))
                    jq('#' + objectPosition + '_arv_split_stock_item input').val(jq(this).find(":selected").attr("stockItemUUID"))
                    jq('#' + objectPosition + '_arv_split_dispensing_location input').val(jq(this).find(":selected").attr("location"))
                    jq('#' + objectPosition + '_arv_split input').val(jq(this).find(":selected").attr("drugUuid"))
                });
            }

        });

        function getDrugByConcept(concept, drug_strength_id) {
            if (enableStockManagement) {
                jq("#" + drug_strength_id + "").find("select").empty();
                var stockItems = []
                jq.ajax({
                    type: "GET",
                    url: '/' + OPENMRS_CONTEXT_PATH + "/ws/rest/v1/stockmanagement/stockiteminventory?v=default&amp;limit=10&amp;totalCount=true&amp;conceptId=" + concept + "&amp;groupBy=LocationStockItem&amp;dispenseLocationUuid=" + currentLocationUUID + "&amp;includeStrength=1&amp;includeConceptRefIds=1",
                    dataType: "json",
                    async: false,
                    success: function (data) {
                        stockItems = data.results;
                    }
                });
                if (stockItems.length) {
                    enable_fields(drug_strength_id)
                }
                jq("#" + drug_strength_id + "").find("select").append($("<option >Select Strength</option>").attr("value", ''));
                for (var i = 0; i &lt; stockItems.length; i++) {
                    jq("#" + drug_strength_id + "").find("select").append($("<option></option>").attr("value", stockItems[i].stockItemUuid).text((stockItems[i].drugName + " | " + stockItems[i].quantity + " " + stockItems[i].quantityUoM + " at " + stockItems[i].partyName).replace("null", " qty ")).attr("location", stockItems[i].locationUuid).attr("strength", stockItems[i].drugStrength).attr("stockItemUUID", stockItems[i].stockItemUuid).attr("drugUuid", stockItems[i].drugUuid));
                }
            }
        }

        function getLocationByName(locationName) {
            var locationUUID
            jq.ajax({
                type: "GET",
                url: '/' + OPENMRS_CONTEXT_PATH + "/ws/rest/v1/location?q=" + locationName,
                dataType: "json",
                async: false,
                success: function (data) {
                    locationUUID = data.results[0].uuid
                }
            });
            return locationUUID
        }
    </script>

    <div>
        <div class="row">
            <div class="col-md-6">
                <h1>HMIS ACP 015:Exposed Infant Clinical Chart - Encounter Form</h1>
            </div>
            <div class="col-md-5"></div>
            <div class="col-md-1">
                <submit class="confirm" submitLabel="Save"/>
            </div>
            <span class="hidden">
                <encounterLocation id="location_id" default="SessionAttribute:emrContext.sessionLocationId"/>
            </span>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="card">
                    <div class="card-header">
                        <ul class="nav nav-tabs card-header-tabs">
                            <li class="nav-item">
                                <a class="nav-link active" data-toggle="tab" href="#appointment-section">Appointment,HIV
                                    Test, Infant Feeding and Immunisation Codes</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-toggle="tab" href="#clinical-assessment-section">Clinical
                                    Assessment</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-toggle="tab" href="#investigation-section">Investigations</a>
                            </li>

                            <li class="nav-item">
                                <a class="nav-link" data-toggle="tab" href="#treatment-section">Medication and
                                    Treatment</a>
                            </li>
                        </ul>
                    </div>
                    <div class="card-body">
                        <div class="tab-content">

                            <div class="tab-pane active" id="appointment-section">
                                <section>
                                    <div class="card">
                                        <div class="card-header">Appointment Details</div>
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col-md-3">
                                                    <label>Visit Number</label>
                                                    <obs conceptId="162992"
                                                         answerConceptIds="162993,162994,162995,162996,162997,162998,162999,163000,163001,163002,163018,163019,163020,163021,163022"
                                                         answerLabels="Visit 1,Visit 2,Visit 3,Visit 4,Visit 5,Visit 6,Visit 7,Visit 8,Visit 9,Visit 10,Visit 11,Visit 12,Visit 13,Visit 14,Visit 15"
                                                         required="true"/>
                                                </div>
                                                <div class="col-md-3">
                                                    <label>Date of Appointment</label>
                                                    <obs conceptId="99443" allowFutureDates="true"/>
                                                </div>
                                                <div class="col-md-3 html-form-entry-disabled-field">
                                                    <label>Date of Visit</label>
                                                    <encounterDate default="today"
                                                                   disallowMultipleEncountersOnDate="block"/>
                                                </div>
                                                <div class="col-md-3">
                                                    <label>Next Appointment Date</label>
                                                    <obs id="5096" conceptId="5096" allowFutureDates="true"/>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-3">
                                                    <label>Service Provider</label>
                                                    <encounterProviderAndRole
                                                            encounterRole="240b26f9-dd88-4172-823d-4a8bfeb7841f"
                                                            required="required" default="currentUser"/>
                                                    <span class="hidden">
                                                       <encounterLocation id="location_id"
                                                                          default="SessionAttribute:emrContext.sessionLocationId"/>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="card">
                                        <div class="card-header">HIV Test, Infant Feeding, Immunisation Codes</div>
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col-md-1">
                                                    <label>HIV Test</label>
                                                </div>
                                                <div class="col-md-3">
                                                    <obs conceptId="99080" answerConceptIds="163006,163007"
                                                         style="radio" class="horizontal"/>
                                                </div>
                                                <div class="col-md-2">
                                                    <label>Infant Feeding Code</label>
                                                </div>
                                                <div class="col-md-3">
                                                    <obs conceptId="99451"
                                                         answerConceptIds="5526,99089,6046,99791,99792,99793"
                                                         answerLabels="EBF - Exclusive Breast Feeding,RF - Replacement Feeding (never breastfed),MF - Mixed Feeding (below 6 months) ,CF - Complimentary Feeding (above 6 months),W - Wean from breastfeeding,NLB - No Longer Breastfeeding"/>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-3">
                                                    <label>Immunisation Codes</label>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-3">
                                                    <obs conceptId="162839" answerConceptId="886"
                                                         answerLabel="1 - BCG"/>
                                                    <obs conceptId="162839" answerConceptId="162834"
                                                         answerLabel="5 - Polio 3"/>
                                                    <obs conceptId="162839" answerConceptId="163014"
                                                         answerLabel="9 - PCV 1"/>
                                                    <obs conceptId="162839" answerConceptId="162347"
                                                         answerLabel="13 - Rotavirus 2"/>
                                                    <obs conceptId="162839" answerConceptId="162838"
                                                         answerLabel="17 - De-Worming"/>
                                                </div>
                                                <div class="col-md-3">
                                                    <obs conceptId="162839" answerConceptId="162831"
                                                         answerLabel="2 - Polio 0"/>
                                                    <obs conceptId="162839" answerConceptId="1422"
                                                         answerLabel="6 - IPV"/>
                                                    <obs conceptId="162839" answerConceptId="163015"
                                                         answerLabel="10 - PCV 2"/>
                                                    <obs conceptId="162839" answerConceptId="165409"
                                                         answerLabel="14 - Measles 1 (MR1)"/>
                                                    <span id="immunization-not-done">
                                                        <span id="specify-why-not-immunized">
                                                            <obs conceptId="162839" answerConceptId="90002"
                                                                 answerLabel="Not Done (specify which ones)"/>
                                                        </span>
                                                        <span id="why-not-immunized"
                                                              class="html-form-entry-disabled-field">
                                                            <obs conceptId="162890"/>
                                                        </span>
                                                    </span>
                                                </div>
                                                <div class="col-md-3">
                                                    <obs conceptId="162839" answerConceptId="162832"
                                                         answerLabel="3 - Polio 1"/>
                                                    <obs conceptId="162839" answerConceptId="162835"
                                                         answerLabel="7 - DPT-HepB + Hib 1"/>
                                                    <obs conceptId="162839" answerConceptId="163016"
                                                         answerLabel="11 - PCV 3"/>
                                                    <obs conceptId="162839" answerConceptId="165410"
                                                         answerLabel="15 - Measles 2 (MR2)"/>
                                                </div>
                                                <div class="col-md-3">
                                                    <obs conceptId="162839" answerConceptId="162833"
                                                         answerLabel="4 - Polio 2"/>
                                                    <obs conceptId="162839" answerConceptId="162836"
                                                         answerLabel="8 - DPT-HepB + Hib 2"/>
                                                    <obs conceptId="162839" answerConceptId="162346"
                                                         answerLabel="12 - Rotavirus 1"/>
                                                    <obs conceptId="162839" answerConceptId="99356"
                                                         answerLabel="16 - Vitamin A"/>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                            </div>

                            <div class="tab-pane" id="clinical-assessment-section">
                                <section>
                                    <div class="card">
                                        <div class="card-header">Growth Measures</div>
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col-md-3">
                                                    <label>Height (cm)</label>
                                                    <obs conceptId="5090"/>
                                                </div>
                                                <div class="col-md-3">
                                                    <label>Weight (kg)</label>
                                                    <obs conceptId="5089"/>
                                                </div>
                                                <div class="col-md-3">
                                                    <label>Z-Scores</label>
                                                    <obs conceptId="99800"
                                                         answerConceptIds="99803,99804,99805,99806,99807"
                                                         answerLabels="&#60;-3,-3_&#60;-1,-1_1,&#62;1_3,&#62;3"/>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-3">
                                                    <label>MUAC (cm)</label>
                                                    <obs id="muac-score" conceptId="CIEL:1343"/>
                                                </div>
                                                <div class="col-md-3">
                                                    <label>MUAC Code</label>
                                                    <obs id="muac-code" conceptId="99801"
                                                         answerConceptIds="99028,99029,99027"
                                                         answerLabels="Red &lt;11.5cm and/or Oedema Present,Yellow 11.5 -&lt;12.5cm and Oedema Absent,Green &gt;=12.5cm and Oedema Absent"/>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="card">
                                        <div class="card-header">Clinical Assessment for Signs and Symptoms of HIV</div>
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col-md-3">
                                                    <obs conceptId="162853" answerConceptId="162848"
                                                         answerLabel="WELL - No Clinical Signs and Symptoms"/>
                                                    <obs conceptId="162853" answerConceptId="90130"
                                                         answerLabel="OT - Oral Thrush"/>
                                                    <obs conceptId="162853" answerConceptId="162851"
                                                         answerLabel="ADR - Acute Diarrhea"/>
                                                    <obs conceptId="162853" answerConceptId="5018"
                                                         answerLabel="PDR - Persistent Diarrhea"/>
                                                </div>
                                                <div class="col-md-3">
                                                    <obs conceptId="162853" answerConceptId="162847"
                                                         answerLabel="LN - Palpable Lymph Nodes"/>
                                                    <obs conceptId="162853" answerConceptId="162849"
                                                         answerLabel="EI - Ear Infection"/>
                                                    <obs conceptId="162853" answerConceptId="162852"
                                                         answerLabel="RDR - Recurrent Diarrhea"/>
                                                    <span id="enable-disable-clinical-assessment">
                                                        <span id="specify-other-signs-and-symptoms-of-hiv">
                                                            <obs conceptId="162853" answerConceptId="90002"
                                                                 answerLabel="Others (specify)"/>
                                                        </span>
                                                        <span id="other-signs-and-symptoms-of-hiv"
                                                              class="html-form-entry-disabled-field">
                                                            <obs conceptId="163008" answerLabel="Others (specify)"/>
                                                        </span>
                                                    </span>
                                                </div>
                                                <div class="col-md-3">
                                                    <obs conceptId="162853" answerConceptId="832"
                                                         answerLabel="WL - Weight Loss"/>
                                                    <obs conceptId="162853" answerConceptId="162850"
                                                         answerLabel="G - Poor Growth (Height)"/>
                                                    <obs conceptId="162853" answerConceptId="42"
                                                         answerLabel="PNEU - Pneumonia"/>
                                                </div>
                                                <div class="col-md-3">
                                                    <obs conceptId="162853" answerConceptId="90103"
                                                         answerLabel="F - Fever"/>
                                                    <obs conceptId="162853" answerConceptId="107"
                                                         answerLabel="C - Coughing"/>
                                                    <obs conceptId="162853" answerConceptId="512"
                                                         answerLabel="RASH - Skin Rash"/>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="card">
                                        <div class="card-header">Developmental Assessment for Evidence of Delay</div>
                                        <div class="card-body">
                                            <label>Development Milestones</label>
                                            <div class="row">
                                                <div class="col-md-3">
                                                    <obs conceptId="162864" answerConceptId="162855"
                                                         answerLabel="SMI - Smiling"/>
                                                    <obs conceptId="162864" answerConceptId="162860"
                                                         answerLabel="COG - Cognition(point to 3 familiar objects)"/>
                                                    <obs conceptId="162864" answerConceptId="162862"
                                                         answerLabel="CRA - Crawling"/>
                                                </div>
                                                <div class="col-md-3">
                                                    <obs conceptId="162864" answerConceptId="162863"
                                                         answerLabel="ST - Standing"/>
                                                    <obs conceptId="162864" answerConceptId="162861"
                                                         answerLabel="ROLL - Rolling Over"/>
                                                </div>
                                                <div class="col-md-3">
                                                    <obs conceptId="162864" answerConceptId="162858"
                                                         answerLabel="HEAD - Controlling the Head"/>
                                                    <obs conceptId="162864" answerConceptId="162857"
                                                         answerLabel="SIT - Sitting"/>
                                                </div>
                                                <div class="col-md-3">
                                                    <obs conceptId="162864" answerConceptId="162859"
                                                         answerLabel="TOB - Transfering objects from hand to hand"/>
                                                    <obs conceptId="162864" answerConceptId="162856"
                                                         answerLabel="W - Walking"/>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-3">
                                                    <label>Head Circumference (cm)</label>
                                                    <obs conceptId="5314"/>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                            </div>

                            <div class="tab-pane" id="treatment-section">
                                <section>
                                    <div class="card">
                                        <div class="card-header">
                                            <label>Other Medications</label>
                                        </div>
                                        <div class="card-body">
                                            <div>
                                                <fieldset>
                                                    <repeat>
                                                        <template>
                                                            <obsgroup groupingConceptId="160741">
                                                                <div class="row multi-drug" id="{id}-toggleContainer">
                                                                    <div class="col-md-3">
                                                                        <obs id="{id}-drug"
                                                                             labelText="Drug" conceptId="1282"
                                                                             answerClasses="Drug" style="autocomplete"
                                                                             class="fullwidth drug-other"/>
                                                                    </div>
                                                                    <div class="col-md-3 drug_strength hidden"
                                                                         id="drug_strength_select_{id}">
                                                                        <label>Strength | Stock Qty</label>
                                                                        <select class="form-control"
                                                                                name="drug_strength_select_{id}"
                                                                                onselect="this">
                                                                            <option value="">Select Strength</option>
                                                                        </select>
                                                                    </div>

                                                                    <div class="col-md-3 drug_strength hidden"
                                                                         id="drug_strength_{id}">
                                                                        <obs class="drug-strength" conceptId="1444"
                                                                             labelText="Strength"/>
                                                                    </div>
                                                                    <div class="hidden">
                                                                        <obs id="drug_stock_item_{id}"
                                                                             conceptId="166969"
                                                                             labelText="Stock Item Id"/>
                                                                        <obs id="drug_dispensing_location_{id}"
                                                                             conceptId="166968"
                                                                             labelText="dispensing Location ID"/>
                                                                        <obs id="drug_{id}" conceptId="166970"
                                                                             labelText="Drug ID"/>
                                                                    </div>
                                                                    <div class="col-md-3" id="quantity_{id}">
                                                                        <obs id="other-meds-quantity"
                                                                             labelText="Quantity" conceptId="160856"/>
                                                                    </div>
                                                                    <div class="col-md-3">
                                                                        <obs labelText="Qty unit" conceptId="165791"
                                                                             id="qty_unit_{id}"
                                                                             answerConceptSetIds="162402,162384"/>
                                                                    </div>
                                                                    <div class="col-md-3 duration">
                                                                        <label>Duration</label>
                                                                        <obs id="duration_{id}" conceptId="159368"/>
                                                                    </div>
                                                                    <div class="col-md-3">
                                                                        <obs conceptId="1732" id="duration_unit_{id}"
                                                                             labelText="Duration unit"/>
                                                                    </div>
                                                                    <div class="col-md-3">
                                                                        <obs conceptId="160855"
                                                                             labelText="Frequency" answerConceptIds="160862,162251,162250,1099"/>
                                                                    </div>
                                                                    <div class="col-md-6">
                                                                        <obs conceptId="175387"
                                                                             labelText="Dose Instruction" rows="2"
                                                                             cols="90"/>
                                                                    </div>
                                                                    <div class="col-md-3">
                                                                        <div class="add-entry">
                                                                            <a href="#" id="{id}-addEntry"
                                                                               class="addEntry add-more-link"><i
                                                                                    class="icon-plus-sign"></i></a>
                                                                            <a href="#"
                                                                               class="removeEntry remove-more-link"
                                                                               id="{id}-removeEntry"><i
                                                                                    class="icon-minus"></i></a>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </obsgroup>
                                                        </template>
                                                        <render id="1"/>
                                                        <render id="2"/>
                                                        <render id="3"/>
                                                        <render id="4"/>
                                                        <render id="5"/>
                                                        <render id="6"/>
                                                        <render id="7"/>
                                                        <render id="8"/>
                                                        <render id="9"/>
                                                        <render id="10"/>
                                                    </repeat>
                                                </fieldset>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="card">
                                        <div class="card-header">Prophylaxis</div>
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col-md-3">
                                                    Cotrim
                                                    <obs conceptId="99798" answerConceptIds="90003,90004"
                                                         answerLabels="Yes, No" style="radio" class="horizontal"/>
                                                </div>
                                                <div class="col-md-3">
                                                    NVP
                                                    <obs conceptId="99799" answerConceptIds="90003,90004"
                                                         answerLabels="Yes, No" style="radio" class="horizontal"/>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="card">
                                        <div class="card-header">Medication</div>
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col-md-4">
                                                    <label>Refill of ART for Mother?</label>
                                                    <obs conceptId="162854" answerConceptIds="90003,90004"
                                                         answerLabels="Yes, No" style="radio" class="horizontal"/>
                                                </div>
                                            </div>
                                            <label>Other Medication / Care Items</label>
                                            <div class="row">
                                                <div class="col-md-3">
                                                    <obs conceptId="1193" answerConceptId="931"
                                                         answerLabel="Amitriptilline"/>
                                                    <obs conceptId="1193" answerConceptId="922"
                                                         answerLabel="Cloxacillin"/>
                                                    <obs conceptId="1193" answerConceptId="1108" answerLabel="EH"/>
                                                    <obs conceptId="1193" answerConceptId="926"
                                                         answerLabel="Ketoconazole"/>
                                                    <obs conceptId="1193" answerConceptId="99054"
                                                         answerLabel="Nutrition Support"/>
                                                    <obs conceptId="1193" answerConceptId="99127" answerLabel="RHE"/>
                                                    <obs conceptId="1193" answerConceptId="916" answerLabel="Septrin"/>
                                                </div>
                                                <div class="col-md-3">
                                                    <obs conceptId="1193" answerConceptId="265"
                                                         answerLabel="Amoxicillin"/>
                                                    <obs conceptId="1193" answerConceptId="99266"
                                                         answerLabel="Coartem"/>
                                                    <obs conceptId="1193" answerConceptId="272"
                                                         answerLabel="Erythromicin"/>
                                                    <obs conceptId="1193" answerConceptId="244"
                                                         answerLabel="Mebendazole"/>
                                                    <obs conceptId="1193" answerConceptId="919" answerLabel="Nystatin"/>
                                                    <obs conceptId="1193" answerConceptId="768" answerLabel="RHZ"/>
                                                    <obs conceptId="1193" answerConceptId="329"
                                                         answerLabel="Vit B Complex"/>
                                                </div>
                                                <div class="col-md-3">
                                                    <obs conceptId="1193" answerConceptId="779"
                                                         answerLabel="Cetrizine"/>
                                                    <obs conceptId="1193" answerConceptId="90171"
                                                         answerLabel="Dapsone"/>
                                                    <obs conceptId="1193" answerConceptId="747"
                                                         answerLabel="Fluconazole"/>
                                                    <obs conceptId="1193" answerConceptId="237"
                                                         answerLabel="Metronidazole"/>
                                                    <obs conceptId="1193" answerConceptId="89"
                                                         answerLabel="Paracetamol"/>
                                                    <obs conceptId="1193" answerConceptId="1131" answerLabel="RHZE"/>
                                                    <span id="medication">
                                                        <span id="specify-other-medication">
                                                            <obs conceptId="1193" answerConceptId="90002"
                                                                 answerLabel="Other specify"/>
                                                        </span>
                                                        <span id="other-medication"
                                                              class="html-form-entry-disabled-field">
                                                            <obs conceptId="99035" answerClasses="Drug"
                                                                 style="autocomplete"/>
                                                        </span>
                                                    </span>
                                                </div>
                                                <div class="col-md-3">
                                                    <obs conceptId="1193" answerConceptId="740"
                                                         answerLabel="Ciprofloxacine"/>
                                                    <obs conceptId="1193" answerConceptId="95"
                                                         answerLabel="Doxycycline"/>
                                                    <obs conceptId="1193" answerConceptId="912"
                                                         answerLabel="Ibuprofen"/>
                                                    <obs conceptId="1193" answerConceptId="461"
                                                         answerLabel="Multivitamins"/>
                                                    <obs conceptId="1193" answerConceptId="1194" answerLabel="RH"/>
                                                    <obs conceptId="1193" answerConceptId="99128" answerLabel="RHZES"/>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <label>ACTION(S) TAKEN if any care indicator are a concern</label>
                                                    <obs conceptId="162865" style="textarea"/>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                            </div>

                            <div class="tab-pane" id="investigation-section">
                                <section>
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <div class="card">
                                                <div class="card-header">
                                                    <label>Laboratory Tests</label>
                                                </div>
                                                <div class="card-body">
                                                    <div class="row investigations">
                                                <span class="lablex2">
                                                    <repeat with="['165418','CrAg'],['165417','RPR'],['165416','TB LAM'],['165413','GeneXpert'],['165415','Microscopy'],['1019','CBC'],['844','PCR']">
                                                        <obs id="{0}" conceptId="1271" answerConceptId="{0}"
                                                             answerLabel="{1}" style="checkbox"/>
                                                    </repeat>
                                                </span>

                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </section>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <postSubmissionAction
            class="org.openmrs.module.ugandaemr.htmlformentry.ExposedInfantClinicalEncounterEnrollmentPostSubmissionAction"/>
</htmlform>